<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geethanjali Institute LMS & Features</title>
    <!-- Chart.js & QR generator -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        /* Reset & basics */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background: #f4f7fb;
            color: #0f172a;
            scroll-behavior: smooth;
        }

        header {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            background: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        header img {
            height: 50px;
            margin-right: 15px;
        }

        header h1 {
            font-size: 22px;
            color: #2563eb;
            flex: 1;
        }

        nav a {
            margin-left: 15px;
            text-decoration: none;
            color: #0f172a;
            font-weight: 500;
            transition: 0.3s;
            cursor: pointer;
        }

        nav a:hover {
            color: #2563eb;
        }

        section {
            padding: 80px 20px 20px;
        }

        .landing-img {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 10px;
        }

        .special-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            padding: 20px;
            border-radius: 12px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card:nth-child(1) {
            background: #2563eb;
        }

        .feature-card:nth-child(2) {
            background: #f59e0b;
        }

        .feature-card:nth-child(3) {
            background: #10b981;
        }

        .feature-card:nth-child(4) {
            background: #ef4444;
        }

        .companies {
            margin-top: 40px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .company-card {
            padding: 15px;
            border-radius: 12px;
            background: #fef3c7;
            text-align: center;
            transition: 0.3s;
        }

        .company-card:hover {
            transform: translateY(-5px);
            background: #fde68a;
        }

        .lms-section {
            display: none;
            margin-top: 20px;
        }

        .page {
            margin-top: 20px;
        }

        .card {
            background: #fff;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
            margin-bottom: 15px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        input,
        button,
        select {
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid #e6eef8;
            font-size: 14px;
        }

        button {
            background: #2563eb;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            background: #1d4ed8;
        }

        .chatbox {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .msg {
            margin: 6px 0;
            padding: 8px;
            border-radius: 6px;
            max-width: 80%;
        }

        .user {
            background: #2563eb;
            color: #fff;
            margin-left: auto;
        }

        .bot {
            background: #e5e7eb;
            color: #111;
            margin-right: auto;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <header>
        <img src="logo.jpg" alt="College Logo">
        <h1>Geethanjali Institute of Science And Technology</h1>
        <nav>
            <a onclick="scrollToLanding()">Home</a>
            <a onclick="showPage('dashboard')">Dashboard</a>
            <a onclick="showPage('classes')">Classes</a>
            <a onclick="showPage('attendance')">Attendance</a>
            <a onclick="showPage('students')">Students</a>
            <a onclick="showPage('reports')">Reports</a>
            <a onclick="showPage('ai')">AI Tutor</a>
        </nav>
    </header>

    <!-- Landing Page -->
    <section id="landing">
        <img src="pic.jpg" class="landing-img" alt="College Image">
        <p style="margin-top:15px;font-weight:bold;"><a
                href="https://www.google.com/maps?q=Geethanjali+Institute+of+Science+And+Technology,+Gangavaram"
                target="_blank">Geethanjali Institute of Science And Technology Gangavaram, 3rd Mile,Nellore-Bombay
                Highway,Gangavaram(V), Kovur M), S.P.S.R, Andhra Pradesh 524137</a></p>

        <h2 style="margin-top:30px;">Special Features</h2>
        <div class="special-features">
            <div class="feature-card" onclick="showFeatureDetail('placements')">100% Placement</div>
            <div class="feature-card" onclick="showFeatureDetail('nss')">NSS Activities</div>
            <div class="feature-card" onclick="showFeatureDetail('topcgpa')">Highest CGPA</div>
            <div class="feature-card" onclick="showFeatureDetail('facilities')">Modern Labs & Facilities</div>
        </div>
        <h2 style="margin-top:40px;">Companies Visited</h2>
        <div class="companies">
            <div class="company-card">TCS<br><small>12 Students Placed</small></div>
            <div class="company-card">Infosys<br><small>10 Students Placed</small></div>
            <div class="company-card">Amazon<br><small>5 Students Placed</small></div>
            <div class="company-card">Microsoft<br><small>3 Students Placed</small></div>
        </div>
    </section>

    <!-- Special Feature Details -->
    <section id="featureDetail" class="hidden">
        <button onclick="backToLanding()">Back</button>
        <div id="featureContent" class="card" style="margin-top:20px;"></div>
    </section>

    <!-- LMS Sections -->
    <section id="lmsSections" class="lms-section">
        <div id="pageDashboard" class="page">
            <h2>Dashboard</h2>
            <div class="grid">
                <div class="card">Total Students <h3 id="kTotal">0</h3>
                </div>
                <div class="card">Avg Attendance <h3 id="kAttend">0%</h3>
                </div>
                <div class="card">At-Risk Students <h3 id="kRisk">0</h3>
                </div>
            </div>
            <div class="grid" style="margin-top:15px;">
                <div class="card" style="grid-column:span 2"><canvas id="chartAttendance" height="120"></canvas></div>
                <div class="card"><canvas id="chartGrades" height="120"></canvas></div>
            </div>
        </div>

        <div id="pageClasses" class="page hidden">
            <h2>Classes</h2>
            <div id="classesList"></div>
        </div>

        <div id="pageAttendance" class="page hidden">
            <h2>Attendance</h2>
            <select id="selectClassForSession"></select>
            <button onclick="startSession()">Start</button>
            <button onclick="endSession()">End</button>
            <div id="sessionArea"></div>
            <br>
            <input id="manualRoll" placeholder="Enter Roll">
            <button onclick="manualMark()">Mark Present</button>
            <p id="manualMsg"></p>

            <h3>Scan QR to mark attendance:</h3>
            <div id="qrCode"></div>
        </div>


        <div id="pageStudents" class="page hidden">
            <h2>Students</h2>
            <div id="studentsList"></div>
        </div>

        <div id="pageReports" class="page hidden">
            <h2>Reports</h2>
            <select id="reportClassSelect"></select>
            <button onclick="exportAttendanceCSV()">Export CSV</button>
        </div>

        <div id="pageAi" class="page hidden">
            <h2>AI Tutor ðŸ¤–</h2>
            <div class="chatbox" id="chatbox"></div>
            <input id="aiInput" placeholder="Ask me anything..." style="width:80%">
            <button onclick="sendToAI()">Send</button>
        </div>

        <script>
            // Scroll to landing
            function scrollToLanding() {
                document.getElementById('landing').style.display = 'block';
                document.getElementById('lmsSections').style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            // Show LMS page from nav
            function showPage(page) {
                document.getElementById('landing').style.display = 'none';
                document.getElementById('lmsSections').style.display = 'block';
                document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
                document.getElementById('page' + capitalize(page)).classList.remove('hidden');
            }

            // Capitalize
            function capitalize(s) { return s.charAt(0).toUpperCase() + s.slice(1); }

            // Special Feature Details
            function showFeatureDetail(feature) {
                document.getElementById('featureDetail').classList.remove('hidden');
                document.getElementById('landing').style.display = 'none';
                let content = '';
                switch (feature) {
                    case 'placements': content = '<h3>100% Placement</h3><p>All eligible students get placed in top companies.</p>'; break;
                    case 'nss': content = '<h3>NSS Activities</h3><p>Students actively participate in community service & outreach.</p>'; break;
                    case 'topcgpa': content = '<h3>Highest CGPA</h3><p>Top CGPA achieved: 9.8/10</p>'; break;
                    case 'facilities': content = '<h3>Modern Labs & Facilities</h3><p>State-of-the-art labs and learning resources.</p>'; break;
                }
                document.getElementById('featureContent').innerHTML = content;
            }
            function backToLanding() {
                document.getElementById('featureDetail').classList.add('hidden');
                document.getElementById('landing').style.display = 'block';
            }

            // LMS Data & Functions
            let store = { classes: [], students: [], sessions: [], attendance: [] };

            function seedDemo() {
                store.classes = [
                    { id: 'cse', name: 'CSE', link: 'https://www.youtube.com/watch?v=8hly31xKli0' },
                    { id: 'aiml', name: 'AIML', link: 'https://www.youtube.com/watch?v=aircAruvnKk' },
                    { id: 'aids', name: 'AIDS', link: 'https://www.youtube.com/watch?v=ua-CiDNNj30' },
                    { id: 'ece', name: 'ECE', link: 'https://www.youtube.com/watch?v=f1x9lgX8GaE' },
                    { id: 'eee', name: 'EEE', link: 'https://www.youtube.com/watch?v=3L3wHDZ0QEk' },
                    { id: 'civil', name: 'Civil', link: 'https://www.youtube.com/watch?v=_dR0ca3vR1k' },
                    { id: 'mech', name: 'Mechanical', link: 'https://www.youtube.com/watch?v=VhL9i8QnHwk' }
                ];
                store.students = [];
                store.classes.forEach(c => {
                    for (let i = 1; i <= 5; i++) {
                        store.students.push({ id: c.id + i, name: `Student${i} ${c.name}`, roll: c.name.toUpperCase() + '10' + i, classId: c.id });
                    }
                });
                renderAll();
            }

            function renderAll() { renderDashboard(); renderClasses(); renderStudents(); }

            function renderDashboard() {
                document.getElementById('kTotal').innerText = store.students.length;
                document.getElementById('kAttend').innerText = '85%';
                document.getElementById('kRisk').innerText = '3';
                renderCharts();
            }

            function renderCharts() {
                new Chart(document.getElementById('chartAttendance'), {
                    type: 'line',
                    data: { labels: ['S1', 'S2', 'S3', 'S4'], datasets: [{ label: 'Attendance %', data: [70, 80, 90, 85] }] }
                });
                new Chart(document.getElementById('chartGrades'), {
                    type: 'bar',
                    data: { labels: ['A', 'B', 'C', 'D'], datasets: [{ label: 'Grades', data: [5, 10, 8, 3] }] }
                });
            }

            function renderClasses() {
                const out = document.getElementById('classesList'); out.innerHTML = '';
                store.classes.forEach(c => {
                    const div = document.createElement('div');
                    div.className = 'card';
                    div.innerHTML = `<b>${c.name}</b> - <button onclick="watchLecture('${c.link}')">Watch Lecture ðŸŽ¥</button>`;
                    out.appendChild(div);
                });
                let sel = document.getElementById('selectClassForSession'); sel.innerHTML = '';
                store.classes.forEach(c => sel.innerHTML += `<option value="${c.id}">${c.name}</option>`);
                let sel2 = document.getElementById('reportClassSelect'); sel2.innerHTML = '';
                store.classes.forEach(c => sel2.innerHTML += `<option value="${c.id}">${c.name}</option>`);
            }

            function startSession() {
                const classId = document.getElementById('selectClassForSession').value;
                const sessionId = 'sess' + Date.now();
                const session = { id: sessionId, classId };
                store.sessions.push(session);
                document.getElementById('sessionArea').innerHTML = `Session started for ${classId}`;

                // Generate QR Code
                document.getElementById('qrCode').innerHTML = ''; // clear previous QR
                new QRCode(document.getElementById('qrCode'), {
                    text: `Attendance for ${classId} - Session ${sessionId}`,
                    width: 150,
                    height: 150
                });
            }

         function endSession() {
                document.getElementById('sessionArea').innerHTML = 'Session ended âœ…';
                document.getElementById('qrCode').innerHTML = ''; // clear the QR code
            }



            function manualMark() {
                const roll = document.getElementById('manualRoll').value;
                if (!roll) { document.getElementById('manualMsg').innerText = 'Enter Roll'; return; }
                store.attendance.push(roll);
                document.getElementById('manualMsg').innerText = `Marked Present: ${roll}`;
            }

            function renderStudents() {
                const out = document.getElementById('studentsList'); out.innerHTML = '';
                store.students.forEach(s => {
                    const div = document.createElement('div'); div.className = 'card';
                    div.innerHTML = `${s.name} - ${s.roll} - ${s.classId}`;
                    out.appendChild(div);
                });
            }

            function exportAttendanceCSV() {
                const rows = [['Roll']];
                store.attendance.forEach(a => rows.push([a]));
                let csv = ''; rows.forEach(r => csv += r.join(',') + '\n');
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a'); a.href = url; a.download = 'attendance.csv'; a.click();
            }

            function watchLecture(link) { window.open(link, '_blank'); }

            function sendToAI() {
                const inp = document.getElementById('aiInput').value;
                if (!inp) return;
                const chat = document.getElementById('chatbox');
                chat.innerHTML += `<div class="msg user">${inp}</div>`;
                chat.innerHTML += `<div class="msg bot">This is a demo response.</div>`;
                document.getElementById('aiInput').value = '';
                chat.scrollTop = chat.scrollHeight;
            }

            // Initialize demo
            seedDemo();
        </script>
</body>

</html>